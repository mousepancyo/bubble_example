package {	import flash.display.Sprite;	import flash.display.Shape;	class Bubble extends Sprite	{		private var _bubles:Array = [];		private var _particles:Array = [];		private var _startX:Number;		private var _startY:Number;				private var _strength:Number; // 強度		private var _removePoint:uint; // 泡を消す座標				public function Bubble(removePoint:uint, strength:Number = .4)		{			_removePoint = removePoint;			_strength = strength;		}				private function createParticle():void		{			var p:Particle = new Particle();			var radius:Number = Math.random() * Math.sqrt(Math.random()) * 3.5;			var angle:Number = Math.random() * (Math.PI) * 2;			p.vx = Math.cos(angle) * radius;			p.vy = Math.sin(angle) * radius;			p.scale = Math.random() * .1;			_particles.push(p);			//			var bubble:BubbleMaterial = new BubbleMaterial();			addChild(bubble);			_bubles.push(bubble);		}						private function emitte():void		{			var n:int = Math.random() * 1 + _strength;			_startX = 0;			_startY = 0;			while (n--) createParticle();		}						public function update():void		{			var n:int = _particles.length;			while (n--) {				var v:Number = Math.random() * 0.15 + 0.85;				var p:Particle = _particles[n];				var ranx:Number = Math.random() * 3 - 1.5;				var rany:Number = Math.random() * - 1;				p.vx += ranx;				p.vy += rany;				p.vx *= v;				p.vy *= v;				p.x += p.vx;				p.y += p.vy;				//				_bubles[n].x = p.x;  _bubles[n].y = p.y;				//				if (p.y < -_removePoint){					_particles.splice(n, 1);					removeChild(_bubles[n]);					_bubles.splice(n, 1);				}			}						//			emitte();		}				//		public function removed():void		{			var l:int = _bubles.length;			for(var i:int; i<l; i++)			{				removeChild(_bubles[i]);			}			_bubles = [];			_particles = [];		}			}}//import flash.display.Sprite;import flash.display.Shape;internal class BubbleMaterial extends Sprite{	public function BubbleMaterial()	{		var n:int = Math.random() * 12 | 0;		var sp:Shape = new Shape();		//		sp.graphics.beginFill(0xFFFFFF, .25);		sp.graphics.drawCircle(-n * .3, -n * .3, n * .5);		sp.graphics.endFill();		sp.graphics.lineStyle(1, 0xFFFFFF, .35);		sp.graphics.drawCircle(0, 0, n);		sp.rotation = Math.random() * 180 | 0;		//		addChild(sp);	}}//import flash.geom.Point;internal class Particle extends Point{	public var vx:Number = 0	public var vy:Number = 0	public var scale:Number = 0;	public var c:uint = 0xFFFFFF;}